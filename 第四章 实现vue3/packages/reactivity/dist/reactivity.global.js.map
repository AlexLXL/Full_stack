{"version":3,"file":"reactivity.global.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts"],"sourcesContent":["export const isObject = v => typeof v === 'object' && v !== null\r\nexport const isString = v => typeof v === 'string'\r\nexport const isFunction = v => typeof v === 'function'\r\nexport const isArray = Array.isArray\r\n\r\n\r\nexport const extend = Object.assign\r\nexport const hasChange = (oldValue, newValue) => oldValue !== newValue\r\nexport const isInteger = (key) => parseInt(key) + '' === key   // 数组的下标\r\nexport const hasOwn = (target, key) => Object.prototype.hasOwnProperty.call(target, key)\r\n\r\nexport const enum ShapeFlags {\r\n    ELEMENT = 1,    // 元素\r\n    FUNCTIONAL_COMPONENT = 1 << 1,  // 函数式组件\r\n    STATEFUL_COMPONENT = 1 << 2,    // setup组件\r\n    TEXT_CHILDREN = 1 << 3, // 内容为文本\r\n    ARRAY_CHILDREN = 1 << 4,    // 内容为数组\r\n    SLOTS_CHILDREN = 1 << 5,\r\n    TELEPORT = 1 << 6,\r\n    SUSPENSE = 1 << 7,\r\n    COMPONENT_SHOULD_KEEP_ALIVE = 1 << 8,\r\n    COMPONENT_KEPT_ALIVE = 1 << 9,\r\n    COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT\r\n}\r\n","import {isArray, isInteger} from \"@vue/shared\";\r\n\r\nlet effectsQueue = new Set()\r\nlet add = (effectsToAdd) => {\r\n    if (effectsToAdd) {\r\n        effectsToAdd.forEach(effect => effectsQueue.add(effect))\r\n    }\r\n}\r\n\r\nexport function effect(fn, options = { lazy: false }) {\r\n    let effect = createReactiveEffect(fn, options)\r\n    if (!options.lazy) {\r\n        effect()\r\n    }\r\n    return effect\r\n}\r\n\r\nlet uid = 0\r\nlet activeEffect;\r\nfunction createReactiveEffect(fn, options) {\r\n    const effect = function () {\r\n        activeEffect = effect\r\n        fn()\r\n        activeEffect = null\r\n    }\r\n    effect.id = uid++\r\n    effect._isEffect = true\r\n    effect.raw = fn\r\n    effect.deps = []\r\n    effect.options = options\r\n    return effect   // 返回一个套娃(fn)的函数\r\n}\r\n\r\n/**\r\n * 收集依赖的effect\r\n * 更新依赖的effect\r\n */\r\nlet targetMap = new WeakMap()\r\nexport function track(target, type, key) {\r\n    // effect里拿值才有activeEffect\r\n    if (!activeEffect) return\r\n    let depsMap = targetMap.get(target)\r\n    if (!depsMap) {\r\n        targetMap.set(target, depsMap = new Map())\r\n    }\r\n    let dep = depsMap.get(key)\r\n    if (!dep) {\r\n        depsMap.set(key, dep = new Set())\r\n    }\r\n    if (!dep.has(activeEffect)) {\r\n        dep.add(activeEffect)\r\n    }\r\n}\r\nexport function trigger(target, key, value, type) {\r\n    let depsMap = targetMap.get(target)\r\n    if (!depsMap) return\r\n    /**\r\n     * 1.修改数组的length触发更新 [这时value为修改后数组长度]\r\n     */\r\n    if(isArray(target) && key === 'length') {\r\n        // 边界处理: effect收集数组某个下标idx; 代码修改数组length为0或小于idx的值\r\n        depsMap.forEach((effects, key) => {\r\n            if (key === 'length' || value - 1 < key) {\r\n                add(effects)\r\n            }\r\n        })\r\n    }else {\r\n        /**\r\n         * 2.数组新增和对象新增（使用length的effects）\r\n         * 3.基础数据/引用数据的值发生改变\r\n         */\r\n        if (type === 'add') {\r\n            if (isArray(target) && isInteger(key)) {\r\n                const effects = depsMap.get('length')\r\n                add(effects)\r\n            }else {\r\n                add(depsMap.get(key))\r\n            }\r\n        }else {\r\n            const effects = depsMap.get(key)\r\n            add(effects)\r\n        }\r\n    }\r\n    effectsQueue.forEach((effect: any) => effect())\r\n}\r\n\r\n\r\n\r\n\r\n","import get = Reflect.get;\r\nimport {hasChange, hasOwn, isArray, isInteger, isObject} from \"@vue/shared\";\r\nimport {reactive, readonly} from \"./reactive\";\r\nimport {track, trigger} from \"./effect\";\r\n\r\nconst reactiveGet = createGet(false, false)\r\nconst shallowReactiveGet = createGet(false, true)\r\nconst readonlyGet = createGet(true, false)\r\nconst shallowReadonlyGet = createGet(true, true)\r\nfunction createGet(isReadonly = false, isShallow = false) {\r\n    // target: 目标对象、key: 需要获取的属性、receiver: 目标对象使用的proxy\r\n    return function get(target, key, receiver) {\r\n        // console.log(\"get::\",target, key)\r\n        let value = Reflect.get(target, key, receiver)\r\n        if (!isReadonly) {\r\n            // --收集依赖--\r\n            track(target, 'get', key)\r\n        }\r\n        if (isShallow) {\r\n            return value\r\n        }\r\n        if (isObject(value)) {\r\n            return isReadonly ? readonly(value) : reactive(value)   // 递归代理[取值的时候才进行,所以性能更优★]\r\n        }\r\n        return value\r\n    }\r\n}\r\n\r\nconst reactiveSet = createSet()\r\nconst shallowReactiveSet = createSet()\r\nconst readonlySet = createSet()\r\nconst shallowReadonlySet = createSet()\r\nfunction createSet() {\r\n    return function set(target, key, value, receiver) {\r\n        let oldValue = target[key]\r\n        // 下面这行: 判断是否已经有这个下标 || 已经有.length这个属性\r\n        let hadKey = isArray(target) && isInteger(key) ? key < target.length : hasOwn(target, key)\r\n        // console.log(\"set::\",target, key, value, `oldValue: ${oldValue}`, hadKey)\r\n        let res = Reflect.set(target, key, value, receiver)\r\n        /**\r\n         * 1.数组新增（但新增的本来就没有effects鸭, 因此要用length的effects更新）\r\n         * 2.基础数据/引用数据的值发生改变\r\n         */\r\n        if (!hadKey) {\r\n            trigger(target, key, value, 'add')\r\n        }else if (hasChange(oldValue, value)) {\r\n            trigger(target, key, value, 'set')\r\n        }\r\n        return res\r\n    }\r\n}\r\n\r\nexport const reactiveHandler = {\r\n    get: reactiveGet,\r\n    set: reactiveSet\r\n}\r\nexport const shallowReactiveHandler = {\r\n    get: shallowReactiveGet,\r\n    set: shallowReactiveSet\r\n}\r\nexport const readonlyHandler = {\r\n    get: readonlyGet,\r\n    set: readonlySet\r\n}\r\nexport const shallowReadonlyHandler = {\r\n    get: shallowReadonlyGet,\r\n    set: shallowReadonlySet\r\n}","import {isObject} from \"@vue/shared\";\r\nimport {reactiveHandler, shallowReactiveHandler, readonlyHandler, shallowReadonlyHandler} from \"./baseHandlers\"\r\n\r\nlet reactiveWeakMap = new WeakMap()\r\nlet shallowReactiveHandlerWeakMap = new WeakMap()\r\nlet readonlyWeakMap = new WeakMap()\r\nlet shallowReadonlyWeakMap = new WeakMap()\r\nexport function reactive(target: object) {\r\n    return createReactiveObject(target, reactiveHandler, reactiveWeakMap)\r\n}\r\nexport function shallowReactive(target: object) {\r\n    return createReactiveObject(target, shallowReactiveHandler, shallowReactiveHandlerWeakMap)\r\n}\r\nexport function readonly(target: object) {\r\n    return createReactiveObject(target, readonlyHandler, readonlyWeakMap)\r\n}\r\nexport function shallowReadonly(target: object) {\r\n    return createReactiveObject(target, shallowReadonlyHandler, shallowReadonlyWeakMap)\r\n}\r\n\r\nfunction createReactiveObject(target, baseHandlers, proxyMap) {\r\n    if (!isObject(target)) return target\r\n\r\n    const exitsProxy = proxyMap.get(target)\r\n    if (exitsProxy) return exitsProxy\r\n\r\n    const proxy = new Proxy(target,  baseHandlers)\r\n    proxyMap.set(target, proxy)\r\n\r\n    return proxy\r\n}","import {hasChange, isArray, isObject} from \"@vue/shared\";\r\nimport {reactive} from \"./reactive\";\r\nimport {track, trigger} from \"./effect\";\r\n\r\nexport function ref(value) {\r\n    return createRef(value, false)\r\n}\r\n\r\nexport function shallowRef(value) {\r\n    return createRef(value, true)\r\n}\r\n\r\nfunction createRef(value, isShallow = false) {\r\n    return new RefImpl(value, isShallow)\r\n}\r\n\r\nconst convert = val => isObject(val) ? reactive(val) : val\r\nclass RefImpl {\r\n    private _value\r\n    constructor(private rawValue, public isShallow) {\r\n        this._value = isShallow ? rawValue : convert(rawValue)\r\n    }\r\n    get value() {\r\n        track(this, 'get', 'value')\r\n        return this._value\r\n    }\r\n    set value(newValue) {\r\n        if (hasChange(newValue, this.rawValue)) {\r\n            this.rawValue = newValue\r\n            this._value = this.isShallow ? newValue : convert(newValue)\r\n            trigger(this, 'value', newValue, 'set')\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function toRef(target, key) {\r\n    return new ObjectRefImpl(target, key)\r\n}\r\nclass ObjectRefImpl {\r\n    constructor(public target, public key) {}\r\n    get value() {\r\n        track(this, 'get', 'value')\r\n        return this.target[this.key]\r\n    }\r\n    set value(newValue) {\r\n        this.target[this.key] = newValue\r\n        trigger(this, 'value', newValue, 'set')\r\n    }\r\n}\r\n\r\nexport function toRefs(object) {\r\n    let ret = isArray(object) ? Array(object.length) : {}\r\n    for (let key in object) {\r\n        ret[key] = toRef(object, key)\r\n    }\r\n    return ret\r\n}"],"names":[],"mappings":"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"}