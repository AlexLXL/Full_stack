<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="../node_modules/@vue/reactivity/dist/reactivity.global.js"></script>
<script type="text/javascript">
    let {reactive, shallowReactive, readonly, shallowReadonly, effect} = vueReactivity
    let person = {name: 'tom', age: 18, info: {a: 1}, arr: [1,2,3]}
    // let r = reactive(person)
    // let sr = shallowReactive(person)
    // let read = readonly(person)
    // let sread = shallowReadonly(person)
    // console.log(r, sr, read, sread)
    // console.log(sread.info)
    // r.name = 'tom01'

    // let r = reactive(person)
    // effect(() => {
    //     console.log(`触发了effect1-相加: ${r.name + r.age}`)
    // })
    // effect(() => {
    //     console.log(`触发了effect2-r.age: ${r.age}`)
    // })
    // effect(() => {
    //     console.log(`触发了effect2-r.name: ${r.name}`)
    // })
    // setTimeout(() => {
    //     r.age = 181
    // }, 1000)
    // setTimeout(() => {
    //     r.info.a = 19
    // }, 1000)

    // JSON.stringify会把所有下标 + .length + .toString都收集
    // let r = reactive(person)
    // effect(() => {
    //     // console.log(`省略: ${r.arr}`)      // 新增的时候会触发
    //     let a = JSON.stringify(r.arr)    // 新增的时候会触发
    //     // r.arr.length                     // 新增的时候会触发
    //     // r.arr   // 新增的时候不会触发【这里只是收集了person属性名arr这个依赖, 没收集arr属性值的】
    //     console.log("省略")
    // })
    // setTimeout(() => {
    //     // r.arr.push(1)       // 会触发两次set,第一次是添加下标3的值,第二次是修改length
    //     r.arr.push(123)
    // },1000)

    // 对象新增
    // let r = reactive(person)
    // effect(() => {
    //     r.xxx
    //     console.log("省略")
    // })
    // setTimeout(() => {
    //     r.xxx = 100
    // },1000)
</script>
</body>
</html>